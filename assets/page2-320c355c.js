import"./modulepreload-polyfill-3cfb730f.js";function x(){mapboxgl.accessToken="pk.eyJ1IjoiamFzdGVyMjgiLCJhIjoiY2xpczEzbm9tMTFzMTNlcW9sbXNpenJvcCJ9.jxS_s16zSL_DFQoBUBn-bA";const o=new mapboxgl.Map({container:"map",style:"mapbox://styles/mapbox/streets-v12",center:[121.0873,14.5389],zoom:12}),u=[[116.4668,4.5864],[126.5374,21.1619]];o.setMaxBounds(u);const c=[121.0873,14.5389];async function r(t){const s=(await(await fetch(`https://api.mapbox.com/directions/v5/mapbox/cycling/${c[0]},${c[1]};${t[0]},${t[1]}?steps=true&geometries=geojson&access_token=${mapboxgl.accessToken}`,{method:"GET"})).json()).routes[0],f=s.geometry.coordinates,p={type:"Feature",properties:{},geometry:{type:"LineString",coordinates:f}};o.getSource("route")?o.getSource("route").setData(p):o.addLayer({id:"route",type:"line",source:{type:"geojson",data:p},layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":"#3887be","line-width":5,"line-opacity":.75}});const h=document.getElementById("instructions"),b=s.legs[0].steps;let l="";for(const j of b)l+=`<li class="list-group-item">${j.maneuver.instruction}</li>`;h.innerHTML=`<p class="p-2"><strong>Delivery time: ${Math.floor(s.duration/60)} min ðŸš´ </strong></p><ol class="list-group list-group-flush">${l}</ol>`}o.on("load",()=>{r(c),o.addLayer({id:"point",type:"circle",source:{type:"geojson",data:{type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:{type:"Point",coordinates:c}}]}},paint:{"circle-radius":10,"circle-color":"#3887be"}}),o.on("click",t=>{const e=Object.keys(t.lngLat).map(s=>t.lngLat[s]),n={type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:{type:"Point",coordinates:e}}]};o.getLayer("end")?o.getSource("end").setData(n):o.addLayer({id:"end",type:"circle",source:{type:"geojson",data:{type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:{type:"Point",coordinates:e}}]}},paint:{"circle-radius":10,"circle-color":"#f30"}}),r(e)})});const a=document.getElementById("destination"),i=document.getElementById("suggestions");a.addEventListener("keyup",d);function d(){const t=a.value;fetch(`https://api.mapbox.com/geocoding/v5/mapbox.places/${t}.json?access_token=${mapboxgl.accessToken}&autocomplete=true`).then(e=>e.json()).then(e=>{const n=e.features.map(s=>s.place_name);y(n)}).catch(e=>{console.error("Autocomplete error:",e)})}function y(t){i.innerHTML="";for(let e=0;e<Math.min(t.length,5);e++){const n=document.createElement("div");n.className="suggestion p-1",n.textContent=t[e],n.addEventListener("click",()=>{a.value=t[e],i.innerHTML="",g()}),i.appendChild(n)}}function g(){const t=a.value;fetch(`https://api.mapbox.com/geocoding/v5/mapbox.places/${t}.json?access_token=${mapboxgl.accessToken}`).then(e=>e.json()).then(e=>{const n=e.features[0].geometry.coordinates;m(n)}).catch(e=>{console.error("Geocoding error:",e)})}function m(t){o.getLayer("end")?o.getSource("end").setData({type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:{type:"Point",coordinates:t}}]}):o.addLayer({id:"end",type:"circle",source:{type:"geojson",data:{type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:{type:"Point",coordinates:t}}]}},paint:{"circle-radius":10,"circle-color":"#f30"}}),r(t)}}x();
